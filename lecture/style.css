:root {
  --primary: #1a1a2e;
  --primary-dark: #0f0c29;
  --accent: #e94560;
  --accent2: #0f3460;
  --light: #f8f9fa;
  --gold: #f0a500;
  --nerve: #00d2ff;
  --nerve-glow: rgba(0, 210, 255, 0.3);
  --card-bg: linear-gradient(135deg, #16213e, #1a1a2e);
  --card-border: rgba(255,255,255,0.08);
}
* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }
body {
  font-family: "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
  background: var(--primary);
  color: #eee;
  line-height: 1.8;
  font-size: 16px;
}

/* ===== TOP NAV ===== */
.top-nav {
  position: fixed; top: 0; left: 0; right: 0; z-index: 100;
  background: rgba(15,12,41,0.95);
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255,255,255,0.06);
  padding: .6rem 1rem;
  display: flex; align-items: center; gap: .8rem;
  overflow-x: auto;
}
.top-nav a {
  color: rgba(255,255,255,.5);
  text-decoration: none;
  font-size: .75rem;
  white-space: nowrap;
  padding: .3rem .7rem;
  border-radius: 20px;
  transition: all .2s;
}
.top-nav a:hover, .top-nav a.active {
  color: #fff;
  background: rgba(0,210,255,0.15);
}
.top-nav .brand {
  color: var(--nerve);
  font-weight: 700;
  font-size: .85rem;
  margin-right: .5rem;
}

/* ===== HERO ===== */
.hero {
  min-height: 100vh;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  text-align: center;
  background: linear-gradient(170deg, #0f0c29, #302b63, #24243e);
  position: relative; overflow: hidden;
  padding: 2rem;
}
.hero::before {
  content: "";
  position: absolute; inset: 0;
  background: radial-gradient(circle at 50% 60%, var(--nerve-glow) 0%, transparent 60%);
}
.hero-badge {
  background: var(--accent);
  color: #fff;
  padding: .4rem 1.4rem;
  border-radius: 50px;
  font-size: .85rem;
  letter-spacing: .08em;
  margin-bottom: 1.5rem;
  position: relative;
}
.hero h1 {
  font-size: clamp(1.6rem, 5vw, 3rem);
  font-weight: 800;
  line-height: 1.3;
  margin-bottom: 1rem;
  position: relative;
}
.hero h1 span { color: var(--nerve); }
.hero h1 .accent { color: var(--accent); }
.hero p {
  font-size: clamp(.95rem, 2vw, 1.15rem);
  max-width: 640px;
  opacity: .85;
  position: relative;
}

/* ===== CHAPTER HEADER ===== */
.ch-header {
  padding: 4rem 1.5rem 2rem;
  max-width: 960px; margin: 0 auto;
  border-bottom: 1px solid rgba(255,255,255,.06);
  margin-top: 3.5rem;
}
.ch-header .time-badge {
  display: inline-block;
  background: rgba(0,210,255,.12);
  color: var(--nerve);
  padding: .3rem 1rem;
  border-radius: 50px;
  font-size: .8rem;
  margin-bottom: .8rem;
}
.ch-header h2 {
  font-size: clamp(1.4rem, 4vw, 2.2rem);
  line-height: 1.4;
}
.ch-header h2 span { color: var(--accent); }

/* ===== SECTIONS ===== */
section { padding: 3rem 1.5rem; max-width: 960px; margin: 0 auto; }
.section-label {
  color: var(--nerve);
  font-size: .75rem;
  letter-spacing: .15em;
  text-transform: uppercase;
  margin-bottom: .5rem;
}
section h3 {
  font-size: 1.3rem;
  margin-bottom: 1rem;
  color: #fff;
}
section h3 span { color: var(--accent); }
section p { margin-bottom: 1rem; opacity: .9; }

/* ===== CARDS ===== */
.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 1.5rem 0;
}
.card {
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 16px;
  padding: 1.8rem;
  transition: transform .2s;
}
.card:hover { transform: translateY(-3px); }
a.card, a.card:visited {
  color: #eee;
  text-decoration: none;
  display: block;
}
a.card h4 { color: var(--gold); }
a.card p { color: rgba(255,255,255,.7); }
.card .num {
  font-size: 2.2rem; font-weight: 800;
  color: var(--nerve);
  line-height: 1;
  margin-bottom: .4rem;
}
.card h4 { font-size: 1rem; margin-bottom: .4rem; }
.card p { font-size: .88rem; opacity: .7; }

/* ===== COMPARE ===== */
.compare-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1.5rem;
  margin: 1.5rem 0;
}
@media (max-width: 600px) { .compare-grid { grid-template-columns: 1fr; } }
.compare-card {
  border-radius: 16px;
  padding: 1.8rem;
  text-align: center;
}
.compare-card.blue {
  background: linear-gradient(135deg, #0f3460, #16213e);
  border: 1px solid rgba(0,210,255,.2);
}
.compare-card.red {
  background: linear-gradient(135deg, #53142d, #1a1a2e);
  border: 1px solid rgba(233,69,96,.3);
}
.compare-card h4 { font-size: 1.05rem; margin-bottom: .8rem; }

/* ===== DIAGRAM WRAP ===== */
.diagram-wrap {
  background: linear-gradient(135deg, #16213e, #1a1a2e);
  border-radius: 20px;
  padding: 2.5rem 1.5rem;
  margin: 2rem 0;
}
.diagram-wrap h3 { text-align: center; margin-bottom: 1.5rem; }
.diagram-wrap svg { width: 100%; height: auto; display: block; margin: 0 auto; }

/* ===== TIMELINE ===== */
.timeline { position: relative; margin: 1.5rem 0; padding-left: 2rem; }
.timeline::before {
  content: ""; position: absolute; left: 6px; top: 0; bottom: 0;
  width: 2px; background: var(--nerve);
}
.timeline-item {
  position: relative; margin-bottom: 1.8rem; padding-left: 1.5rem;
}
.timeline-item::before {
  content: ""; position: absolute; left: -2rem; top: .5rem;
  width: 14px; height: 14px; border-radius: 50%;
  background: var(--nerve); border: 3px solid var(--primary);
}
.timeline-item .year {
  color: var(--gold); font-weight: 700; font-size: .85rem;
}
.timeline-item h4 { font-size: .95rem; margin: .2rem 0; }
.timeline-item p { font-size: .88rem; opacity: .7; }

/* ===== STEP LIST ===== */
.step-list { counter-reset: step; margin: 1.5rem 0; }
.step-item {
  counter-increment: step;
  background: var(--card-bg);
  border: 1px solid var(--card-border);
  border-radius: 14px;
  padding: 1.5rem 1.5rem 1.5rem 4rem;
  margin-bottom: 1rem;
  position: relative;
}
.step-item::before {
  content: counter(step);
  position: absolute; left: 1.2rem; top: 1.4rem;
  width: 28px; height: 28px;
  background: var(--nerve);
  color: var(--primary);
  border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  font-weight: 800; font-size: .85rem;
}
.step-item h4 { margin-bottom: .4rem; }
.step-item p { font-size: .88rem; opacity: .8; }

/* ===== QUOTE ===== */
.quote-box {
  border-left: 4px solid var(--accent);
  padding: 1.5rem;
  margin: 1.5rem 0;
  background: rgba(233,69,96,.05);
  border-radius: 0 12px 12px 0;
}
.quote-box p { font-style: italic; opacity: .9; margin: 0; }
.quote-box cite {
  display: block; margin-top: .5rem;
  font-size: .85rem; color: var(--gold); font-style: normal;
}

/* ===== CALLOUT ===== */
.callout {
  background: linear-gradient(135deg, #e94560, #c23152);
  border-radius: 16px;
  padding: 2rem;
  margin: 2rem 0;
}
.callout h3 { color: #fff; margin-bottom: .5rem; }
.callout p { color: rgba(255,255,255,.9); margin: 0; }

.callout-warn {
  background: linear-gradient(135deg, #8B0000, #5a0000);
  border: 1px solid rgba(233,69,96,.5);
  border-radius: 16px;
  padding: 2rem;
  margin: 2rem 0;
}

/* ===== DO / DONT ===== */
.do-dont { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin: 1.5rem 0; }
@media (max-width: 600px) { .do-dont { grid-template-columns: 1fr; } }
.do-box, .dont-box {
  padding: 1.5rem; border-radius: 14px;
}
.do-box { background: rgba(0,210,255,.08); border: 1px solid rgba(0,210,255,.2); }
.dont-box { background: rgba(233,69,96,.08); border: 1px solid rgba(233,69,96,.2); }
.do-box h4 { color: var(--nerve); }
.dont-box h4 { color: var(--accent); }
.do-box li, .dont-box li { font-size: .88rem; margin-bottom: .3rem; }

/* ===== NAV FOOTER ===== */
.ch-nav {
  display: flex; justify-content: space-between; align-items: center;
  max-width: 960px; margin: 2rem auto;
  padding: 1.5rem;
  border-top: 1px solid rgba(255,255,255,.06);
}
.ch-nav a {
  color: var(--nerve);
  text-decoration: none;
  font-size: .9rem;
  padding: .5rem 1.2rem;
  border: 1px solid rgba(0,210,255,.3);
  border-radius: 8px;
  transition: all .2s;
}
.ch-nav a:hover {
  background: rgba(0,210,255,.1);
}

/* ===== REFERENCES ===== */
.references {
  max-width: 960px; margin: 0 auto;
  padding: 2rem 1.5rem;
  border-top: 1px solid var(--card-border);
}
.references h3 { font-size: 1.1rem; margin-bottom: .8rem; }
.references ol { padding-left: 1.2rem; }
.references li { font-size: .82rem; opacity: .6; margin-bottom: .4rem; }
.references a { color: var(--nerve); text-decoration: none; }

/* ===== FOOTER ===== */
footer {
  text-align: center; padding: 2rem;
  font-size: .78rem; opacity: .35;
}

/* ===== UTILITY ===== */
ul, ol { padding-left: 1.5rem; }
li { margin-bottom: .3rem; }
strong { color: #fff; }
.text-nerve { color: var(--nerve); }
.text-accent { color: var(--accent); }
.text-gold { color: var(--gold); }
.mt-2 { margin-top: 2rem; }
.mb-2 { margin-bottom: 2rem; }
.center { text-align: center; }

/* ===== TOOLTIP (ÂåªÂ≠¶Áî®Ë™û„Éõ„Éê„ÉºË™¨Êòé) ===== */
.tip {
  position: relative;
  color: var(--nerve);
  cursor: help;
  border-bottom: 1px dotted rgba(0,210,255,.5);
  white-space: nowrap;
}
.tip .tip-text {
  visibility: hidden;
  opacity: 0;
  position: absolute;
  bottom: calc(100% + 8px);
  left: 50%;
  transform: translateX(-50%);
  background: rgba(10,10,30,.97);
  color: #ddd;
  padding: .7rem 1rem;
  border-radius: 10px;
  font-size: .82rem;
  width: max-content;
  max-width: 300px;
  z-index: 200;
  transition: opacity .25s;
  border: 1px solid rgba(0,210,255,.35);
  line-height: 1.6;
  font-weight: normal;
  font-style: normal;
  pointer-events: none;
  box-shadow: 0 4px 20px rgba(0,0,0,.5);
  white-space: normal;
  text-align: left;
}
.tip .tip-text::after {
  content: "";
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  border: 6px solid transparent;
  border-top-color: rgba(0,210,255,.35);
}
.tip:hover .tip-text,
.tip:active .tip-text,
.tip:focus .tip-text {
  visibility: visible;
  opacity: 1;
}
@media (max-width: 600px) {
  .tip .tip-text {
    left: 0;
    transform: none;
    max-width: 250px;
    font-size: .78rem;
  }
  .tip .tip-text::after { left: 20px; transform: none; }
}

/* ===== NEW RESEARCH CARD ===== */
.research-card {
  background: linear-gradient(135deg, rgba(0,210,255,.06), rgba(0,210,255,.02));
  border: 1px solid rgba(0,210,255,.2);
  border-radius: 16px;
  padding: 1.8rem;
}
.research-card h4 { color: var(--nerve); margin-bottom: .5rem; }
.research-card .journal { font-size: .78rem; color: var(--gold); margin-bottom: .5rem; }
.research-card p { font-size: .88rem; opacity: .8; }

/* ===== TIPS REFERENCE BOX ===== */
.tips-ref {
  background: rgba(240,165,0,.06);
  border: 1px solid rgba(240,165,0,.25);
  border-radius: 12px;
  padding: 1.2rem 1.5rem;
  margin: 1.5rem 0;
  font-size: .88rem;
}
.tips-ref::before {
  content: "üìñ TIPSÊú¨Á∑®ÂèÇÁÖß";
  display: block;
  color: var(--gold);
  font-weight: 700;
  font-size: .8rem;
  margin-bottom: .3rem;
  letter-spacing: .05em;
}
